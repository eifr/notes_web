import{R as g,r as s,j as e,H as w,L as E,s as n}from"./index-BT_7umD3.js";function y(){const{workspaceId:r}=g.useParams(),[p,k]=s.useState([]),[b,h]=s.useState(""),[a,m]=s.useState("");s.useEffect(()=>{(async()=>{const{data:t,error:u}=await n.from("workspaces").select("name, notebooks (id, name)").eq("id",r).single();u?console.error("Error fetching workspace name:",u):(h(t.name),k(t.notebooks))})()},[r]);const c=async()=>{const{data:o,error:t}=await n.from("notebooks").select("*").eq("workspace_id",r);t?console.error("Error fetching notebooks:",t):k(o)},f=async o=>{if(o.preventDefault(),!a.trim())return;const{error:t}=await n.from("notebooks").insert({name:a,workspace_id:r});t?console.error("Error creating notebook:",t):(m(""),c())},x=async o=>{const{error:t}=await n.from("notebooks").delete().eq("id",o);t?console.error("Error deleting notebook:",t):c()},[N,i]=s.useState(null),[l,d]=s.useState(""),j=async o=>{if(!l.trim())return;const{error:t}=await n.from("notebooks").update({name:l}).eq("id",o);t?console.error("Error updating notebook:",t):(i(null),d(""),c())};return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:`Workspace: ${b}`}),e.jsxs("div",{className:"p-2",children:[e.jsxs("form",{onSubmit:f,children:[e.jsx("input",{type:"text",value:a,onChange:o=>m(o.target.value),placeholder:"New notebook name"}),e.jsx("button",{type:"submit",children:"Create Notebook"})]}),e.jsx("h2",{children:"Notebooks"}),e.jsx("ul",{children:p.map(o=>e.jsx("li",{children:N===o.id?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:l,onChange:t=>d(t.target.value)}),e.jsx("button",{onClick:()=>j(o.id),children:"Save"}),e.jsx("button",{onClick:()=>i(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{to:"/$workspaceId/notebook/$notebookId",params:{notebookId:o.id,workspaceId:r},children:o.name}),e.jsx("button",{onClick:()=>{i(o.id),d(o.name)},children:"Edit"}),e.jsx("button",{onClick:()=>x(o.id),children:"Delete"})]})},o.id))})]})]})}export{y as component};
