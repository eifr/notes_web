import{a as E,r as n,j as e,H as w,L as C,s}from"./index-BT_7umD3.js";function v(){const{notebookId:r,workspaceId:f}=E.useParams(),[x,u]=n.useState([]),[N,b]=n.useState(""),[i,h]=n.useState(""),a=async()=>{const{data:t,error:o}=await s.from("notes").select("*").eq("notebook_id",r);o?console.error("Error fetching notes:",o):u(t)};n.useEffect(()=>{(async()=>{const{data:o,error:m}=await s.from("notebooks").select("name, notes (id, title)").eq("id",r).single();m?console.error("Error fetching notebook name:",m):(b(o.name),u(o.notes))})()},[r]);const p=async t=>{if(t.preventDefault(),!i.trim())return;const{error:o}=await s.from("notes").insert({title:i,notebook_id:r});o?console.error("Error creating note:",o):(h(""),a())},k=async t=>{const{error:o}=await s.from("notes").delete().eq("id",t);o?console.error("Error deleting note:",o):a()},[j,l]=n.useState(null),[c,d]=n.useState(""),g=async t=>{if(!c.trim())return;const{error:o}=await s.from("notes").update({title:c}).eq("id",t);o?console.error("Error updating note:",o):(l(null),d(""),a())};return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:`Notebook: ${N}`}),e.jsxs("div",{className:"p-2",children:[e.jsxs("form",{onSubmit:p,children:[e.jsx("input",{type:"text",value:i,onChange:t=>h(t.target.value),placeholder:"New note title"}),e.jsx("button",{type:"submit",children:"Create Note"})]}),e.jsx("h2",{children:"Notes"}),e.jsx("ul",{children:x.map(t=>e.jsx("li",{children:j===t.id?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:c,onChange:o=>d(o.target.value)}),e.jsx("button",{onClick:()=>g(t.id),children:"Save"}),e.jsx("button",{onClick:()=>l(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{to:"/$workspaceId/notes/$noteId",params:{noteId:t.id,workspaceId:f},children:t.title}),e.jsx("button",{onClick:()=>{l(t.id),d(t.title)},children:"Edit"}),e.jsx("button",{onClick:()=>k(t.id),children:"Delete"})]})},t.id))})]})]})}export{v as component};
